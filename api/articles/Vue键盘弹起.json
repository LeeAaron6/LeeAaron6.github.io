{"title":"移动端键盘弹起，底部按钮顶上去另类解决办法(Vue)","slug":"Vue键盘弹起","date":"2018-07-17T07:12:43.000Z","updated":"2018-10-29T03:16:21.788Z","comments":true,"path":"api/articles/Vue键盘弹起.json","photos":[],"link":"","excerpt":"当我们写一个页面有键盘弹起且底部按钮fixed时你会发现点击输入框是底部按钮会弹起，网上很多方法但是只适用于对应的场景,今天我们来学习一种Vue 页面的键盘弹起。","covers":["/img/07.png"],"content":"<p>当我们写一个页面有键盘弹起且底部按钮fixed时你会发现点击输入框是底部按钮会弹起，网上很多方法但是只适用于对应的场景,今天我们来学习一种Vue 页面的键盘弹起。<a id=\"more\"></a></p>\n<p><img src=\"/img/07.png\" alt=\"phone\"></p>\n<p>解决办法：<br>换个思路，检测浏览器的resize事件，当高度过小时就可以判定为出现这种情况，这时把定位改成ab或者直接隐藏掉之类的。</p>\n<h2 id=\"方法一\"><a href=\"#方法一\" class=\"headerlink\" title=\"方法一\"></a>方法一</h2><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JS\"><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;mt-button v-show=<span class=\"string\">\"isOriginHei\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"add-client\"</span> type=<span class=\"string\">\"default\"</span> size=<span class=\"string\">\"large\"</span> @click.native=<span class=\"string\">\"submitClientInfo\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">icon-svg</span> <span class=\"attr\">iconClass</span>=<span class=\"string\">\"baocun\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"icon-xinzeng\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">icon-svg</span>&gt;</span>提交<span class=\"tag\">&lt;/<span class=\"name\">mt-button</span>&gt;</span></span></span><br></pre></td></tr></table></figure></div>\n<h3 id=\"第一步：-先在-data-中去-定义-一个记录高度是-属性\"><a href=\"#第一步：-先在-data-中去-定义-一个记录高度是-属性\" class=\"headerlink\" title=\"第一步： 先在 data 中去 定义 一个记录高度是 属性\"></a>第一步： 先在 data 中去 定义 一个记录高度是 属性</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JS\"><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data: &#123;</span><br><span class=\"line\">    screenHeight: <span class=\"built_in\">document</span>.body.clientHeight<span class=\"comment\">// 这里是给到了一个默认值 （这个很重要），</span></span><br><span class=\"line\">    originHeight: <span class=\"built_in\">document</span>.body.clientHeight<span class=\"comment\">//默认高度在watch里拿来做比较</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"第二步：-我们需要-讲-reisze-事件在-vue-mounted-的时候-去挂载一下它的方法\"><a href=\"#第二步：-我们需要-讲-reisze-事件在-vue-mounted-的时候-去挂载一下它的方法\" class=\"headerlink\" title=\"第二步： 我们需要 讲 reisze 事件在 vue mounted 的时候 去挂载一下它的方法\"></a>第二步： 我们需要 讲 reisze 事件在 vue mounted 的时候 去挂载一下它的方法</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JS\"><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mounted () &#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">            <span class=\"built_in\">window</span>.onresize = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                    <span class=\"built_in\">window</span>.screenHeight= <span class=\"built_in\">document</span>.body.clientHeight</span><br><span class=\"line\">                    that.screenHeight= <span class=\"built_in\">window</span>.screenHeight</span><br><span class=\"line\">                &#125;)()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"第三步：-watch-去监听这个-属性值的变化，如果发生变化则讲这个val-传递给-this-screenHeight\"><a href=\"#第三步：-watch-去监听这个-属性值的变化，如果发生变化则讲这个val-传递给-this-screenHeight\" class=\"headerlink\" title=\"第三步： watch 去监听这个 属性值的变化，如果发生变化则讲这个val 传递给 this.screenHeight\"></a>第三步： watch 去监听这个 属性值的变化，如果发生变化则讲这个val 传递给 this.screenHeight</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JS\"><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch: &#123;</span><br><span class=\"line\">            screenHeight(val) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.screenHeight= val</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"watch监控比较，判断按钮是否该显示出来\"><a href=\"#watch监控比较，判断按钮是否该显示出来\" class=\"headerlink\" title=\"watch监控比较，判断按钮是否该显示出来\"></a>watch监控比较，判断按钮是否该显示出来</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JS\"><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch: &#123;</span><br><span class=\"line\">            screenHeight (val) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.originHeight != val) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">this</span>.isOriginHei = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">this</span>.isOriginHei = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></div>\n<h2 id=\"方法二\"><a href=\"#方法二\" class=\"headerlink\" title=\"方法二\"></a>方法二</h2><h3 id=\"步骤一：定义一个指令-foot\"><a href=\"#步骤一：定义一个指令-foot\" class=\"headerlink\" title=\"步骤一：定义一个指令 foot\"></a>步骤一：定义一个指令 foot</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JS\"><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> listenAction;</span><br><span class=\"line\"><span class=\"keyword\">let</span> originalHeight;</span><br><span class=\"line\"><span class=\"keyword\">let</span> currHeight;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>().install = <span class=\"function\">(<span class=\"params\">Vue, options = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Vue.directive(<span class=\"string\">'foot'</span>, &#123;</span><br><span class=\"line\">    insert(el, binding) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> elStyle = el.style;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> active = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      originalHeight = <span class=\"built_in\">document</span>.body.clientHeight;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> reset = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!active) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        elStyle.display = <span class=\"string\">'flex'</span>;</span><br><span class=\"line\">        active = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> hang = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(active) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        elStyle.display = <span class=\"string\">'none'</span></span><br><span class=\"line\">        active = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> getCurrHeight = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> getHeight = <span class=\"built_in\">document</span>.body.clientHeight;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getHeight;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> check = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        currHeight = getCurrHeight();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(currHeight != originalHeight) &#123;</span><br><span class=\"line\">          hang();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          reset();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      listenAction = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        check()</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'resize'</span>, listenAction);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    unbind() &#123;</span><br><span class=\"line\">      <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">'resize'</span>,listenAction);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"步骤二：组件引用\"><a href=\"#步骤二：组件引用\" class=\"headerlink\" title=\"步骤二：组件引用\"></a>步骤二：组件引用</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JS\"><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Foot <span class=\"keyword\">from</span> <span class=\"string\">'libs/foot'</span></span><br><span class=\"line\">Vue.use(Foot)</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"步骤三：指令使用\"><a href=\"#步骤三：指令使用\" class=\"headerlink\" title=\"步骤三：指令使用\"></a>步骤三：指令使用</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"HTML\"><figure class=\"iseeu highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">m-flex</span> <span class=\"attr\">class</span>=<span class=\"string\">\"pay-group\"</span> <span class=\"attr\">v-foot</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">m-flex-item</span> <span class=\"attr\">class</span>=<span class=\"string\">\"should-pay\"</span>&gt;</span>应付金额：<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>￥99<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">m-flex-item</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">m-button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"goPay\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"pay-btn\"</span>&gt;</span>去支付<span class=\"tag\">&lt;/<span class=\"name\">m-button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">m-flex</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n","categories":[],"tags":[{"name":"Vue","slug":"Vue","count":5,"path":"api/tags/Vue.json"},{"name":"Mobileterminal","slug":"Mobileterminal","count":2,"path":"api/tags/Mobileterminal.json"},{"name":"resize","slug":"resize","count":1,"path":"api/tags/resize.json"},{"name":"absolute","slug":"absolute","count":1,"path":"api/tags/absolute.json"}]}